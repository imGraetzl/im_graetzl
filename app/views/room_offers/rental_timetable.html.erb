<section class="room-rental-timetable-page">
  <h1><%= @room_offer.slogan %></h1>

  <%= link_to "Previous Month", rental_timetable_room_offer_path(month: @date_range.first - 1.day) %>

  <span><%= l(@date_range.first, format: "%B %Y") %></span>

  <% if @date_range.last.past? %>
    <%= link_to "Next Month", rental_timetable_room_offer_path(month: @date_range.last + 1.day) %>
  <% end %>

  <table class="rental-timetable">
    <thead>
      <tr>
        <th>Date</th>
        <% (0..23).each do |hour| %>
          <th><%= hour %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @date_range.each do |date| %>
        <tr>
          <td><%= date %></td>
          <% @availability.timetable(date).each do |status, length| %>
            <% if status == :disabled %>
              <td class="disabled" colspan="<%= length %>"> Disabled </td>
            <% elsif status == :available %>
              <td class="available" colspan="<%= length %>"> Available </td>
            <% else %>
              <td class="rented" colspan="<%= length %>">
                Rental by <%= link_to status.owner.first_name, messenger_path(thread_id: status.user_message_thread.id) %>
            <% end %>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

</section>
