<% title('Raumteiler - Wähle deinen Betrag') %>

<%= form_tag raumteiler_create_payment_index_path, id: 'stripeForm' do %>

  <%= hidden_field_tag :publishable_key, Rails.configuration.stripe[:publishable_key] %>
  <%= hidden_field_tag :stripeToken %>
  <%= hidden_field_tag :stripeDescription, 'Raumteiler Unterstützung' %>
  <!--<%= hidden_field_tag :stripeBillingAddress, false %>-->

  <section class="payment-form -raumteiler">

    <div class="hl-subtext">
      <h1><span>Raumpartnerschaft</span> gefunden?</h1>
      <p>Sollte dir der Raumteiler geholfen haben, 
        so kannst du uns jetzt mit einem Betrag deiner Wahl unterstützen.</p>
    </div>

    <div class="input-field">
      <%= label_tag(:amount) do %>
        <%= icon_tag "currency-euro" %>
        <span>Wähle deinen Betrag</span>
      <% end %>
      <%= text_field_tag :amount, nil, placeholder: "z.b. 25,00 €", id: 'amount', required: true %>
    </div>

    <div class="input-field">
      <%= label_tag(:amount) do %>
        <%= icon_tag "open-book" %>
        <span>Deine Nachricht</span>
      <% end %>
      <%= text_area_tag :message, nil, placeholder: "Wir freuen uns über ein kurzes Feedback von dir.." %>
    </div>

    <% if current_user %>
      <%= hidden_field_tag :stripeEmail, current_user.email %>
    <% else %>
      <div class="input-field">
        <%= label_tag(:stripeEmail) do %>
          <%= icon_tag "at-symbol" %>
          <span>E-Mail Adresse</span>
        <% end %>
        <%= email_field_tag :stripeEmail, nil, placeholder: 'E-Mail Adresse' %>
      </div>
    <% end %>


    <%= link_to 'Rechnungsanschrift hinzufügen?', 'javascript:', class: 'triggerBillingInformation' %>

    <div class="billing-information">
      <%= render 'payment/form/billing_address' %>
    </div>

    <div class="input-button">
      <%= button_tag 'Weiter zur Zahlung', class: 'btn-primary -mint stripe-submit' %>
    </div>


  </section>


<% end %>

<!-- STRIPE JS -->
<script src="https://checkout.stripe.com/checkout.js"></script>
